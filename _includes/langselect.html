<div id="langselect-container">
  <div id="langselect">
    <!-- Language Dropdown inside a form -->
    <form action="" method="get" id="language-form">
      <div class="language-dropdown">
        <select id="language-select" name="language-select" onchange="location = this.value;">
          {% assign sorted_languages = site.languages | sort %}
          {% for lng in sorted_languages %}
            {% if lng == site.default_lang %}
              {% capture langlink %} {{ page.url }}{% endcapture %}
              {% capture lang_rel %}canonical{% endcapture %}
            {% else %}
              {% capture langlink %}{{ site.baseurl }}/{{ lng }}{{ page.url }}{% endcapture %}
              {% capture lang_rel %}alternate{% endcapture %}
            {% endif %}
            <option value="{{ langlink }}" {% if lng == site.active_lang %}selected{% endif %}>
              {{ site.language_names[lng] }}
            </option>
          {% endfor %}
        </select>
      </div>
    </form>
    <!-- Plain list of language codes for non-JS users -->
    <noscript>
      <ul class="language-list">
        {% for lng in sorted_languages %}
          {% if lng == site.default_lang %}
            {% capture langlink %} {{ page.url }}{% endcapture %}
            {% capture lang_rel %}canonical{% endcapture %}
          {% else %}
            {% capture langlink %}{{ site.baseurl }}/{{ lng }}{{ page.url }}{% endcapture %}
            {% capture lang_rel %}alternate{% endcapture %}
          {% endif %}
          <li><a href="{{ langlink }}" rel="{{ lang_rel }}">{{ lng }}</a></li>
        {% endfor %}
      </ul>
    </noscript>
  </div>
</div>
